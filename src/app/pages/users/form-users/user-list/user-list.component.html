<div class="card card-accent-primary">
    <div class="card-header">

        <div class="d-flex align-items-center">

            <div class="title-icon">
                <i [class]="_cardTitleIcon"></i>
            </div>

            <div>Kullanıcı Listesi</div>

            <div class="ml-auto">
                <button type="button" class="btn btn-smx btn-ghost-secondary text-dark" popover="Window Minimize" triggers="mouseenter:mouseleave" (click)="minimalizeCardBody(cardBody)"><i
            class="cil-window-minimize"></i></button>
                <button type="button" class="btn btn-smx btn-ghost-secondary text-dark" popover="Download Excel" triggers="mouseenter:mouseleave" (click)="exportToExcel()"><i class="cil-data-transfer-down"></i></button>
                <button type="button" class="btn btn-smx btn-ghost-secondary text-dark" popover="Refresh" triggers="mouseenter:mouseleave" (click)="refresh()"><i class="cil-reload"></i></button>
                <button type="button" class="btn btn-smx btn-ghost-secondary text-danger" popover="Add User" triggers="mouseenter:mouseleave" (click)="createUser()"><i class="cil-plus"></i></button>
            </div>
        </div>

    </div>
    <div #cardBody class="card-body">


        <p-table [columns]="cols" [value]="users" styleClass="p-datatable-sm" sortMode="multiple" [rowHover]="true" [resizableColumns]="true" [autoLayout]="true">
            <ng-template pTemplate="header" let-columns>

                <tr>
                    <ng-container *ngFor="let col of columns">
                        <th [pSortableColumn]="col.field" [style.width]="col.width ? col.width : ''">
                            {{col.header}}
                        </th>
                    </ng-container>

                    <th style="width: 120px;">
                    </th>
                </tr>
            </ng-template>

            <!-- <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="name">
            <p-sortIcon field="name"></p-sortIcon>Name
          </th>
          <th pSortableColumn="surnme">
            <p-sortIcon field="surnme"></p-sortIcon>Surnme
          </th>
          <th>Title</th>
          <th>Username</th>
          <th>Email</th>
          <th>Role</th>
          <th>Auth Type</th>
          <th>Active</th>
          <th style="width: 120px;">
          </th>
        </tr>
      </ng-template> -->
            <ng-template pTemplate="body" let-rowData let-columns="columns">
                <tr>

                    <ng-container *ngFor="let col of columns">

                        <td *ngIf="col.field != 'isActive'">
                            <span *ngIf="col.field != 'isActive'">
                {{rowData[col.field]}}
              </span>
                        </td>

                        <td *ngIf="col.field == 'isActive'" style="padding: 0; text-align: center;">
                            <button type="button" class="btn btn-danger btn-pill btn-sm" popover="Passive" triggers="mouseenter:mouseleave" *ngIf="!rowData[col.field]"><i class="fa fa-times"></i></button>
                            <button type="button" class="btn btn-success btn-pill btn-sm ml-1" popover="Active" triggers="mouseenter:mouseleave" *ngIf="rowData[col.field]"><i class="fa fa-check"></i></button>
                        </td>

                    </ng-container>

                    <!-- <td>
            <span *ngIf="col.field != 'isActive'">
              {{rowData[col.field]}}
            </span>

            <span *ngIf="col.field == 'isActive'">
              <label class="switch switch-label switch-pill switch-outline-success-alt noclick">
                <input type="checkbox" class="switch-input" [attr.checked]="rowData[col.field] ? 'checked' : null">
                <span class="switch-slider" data-checked="&#x2713;" data-unchecked="&#x2715;"></span>
              </label>
            </span>
          </td> -->

                    <td style="padding: 0; text-align: center;">
                        <button type="button" class="btn btn-primary btn-sm ml-1" popover="Update User" triggers="mouseenter:mouseleave" (click)="updateUser(rowData)"><i class="cil-pencil"></i></button>
                    </td>

                </tr>
            </ng-template>

            <!-- <ng-template pTemplate="body" let-user>

        <tr>
          <td>{{user.name}}</td>
          <td>{{user.surname}}</td>
          <td>{{user.title}}</td>
          <td>{{user.username}}</td>
          <td>{{user.eMail}}</td>
          <td>{{user.role}}</td>
          <td>{{user.authenticationType}}</td>
          <td>
            <label class="switch switch-label switch-pill switch-outline-success-alt noclick">
              <input type="checkbox" class="switch-input" [attr.checked]="user.isActive ? 'checked' : null">
              <span class="switch-slider" data-checked="&#x2713;" data-unchecked="&#x2715;"></span>
            </label>
          </td>
          <td>
            <button type="button" [disabled]="isMyUser(user)" class="btn btn-danger btn-sm" popover="Delete User"
              triggers="mouseenter:mouseleave" (click)="deleteUser(user)"><i class="cil-trash"></i></button>
            <button type="button" class="btn btn-primary btn-sm" popover="Update User" triggers="mouseenter:mouseleave"
              (click)="updateUser(user)"><i class="cil-pencil"></i></button>
          </td>
        </tr>
      </ng-template> -->

        </p-table>



        <!-- <table class="table table-bordered table-responsive-sm table-striped table-sm" *ngIf="users">
      <thead>
        <tr>
          <th>Name</th>
          <th>Surnme</th>
          <th>Title</th>
          <th>Username</th>
          <th>Email</th>
          <th>Role</th>
          <th>Auth Type</th>
          <th>Active</th>
          <th style="width: 76px;">
          </th>
        </tr>
      </thead>
      <tbody>
        <ng-template [ngIf]="users && users.length > 0" [ngIfElse]="loading">
          <tr *ngFor="let user of users; index as i">
            <td>{{user.name}}</td>
            <td>{{user.surname}}</td>
            <td>{{user.title}}</td>
            <td>{{user.username}}</td>
            <td>{{user.eMail}}</td>
            <td>{{user.role}}</td>
            <td>{{user.authenticationType}}</td>
            <td>
              <label class="switch switch-label switch-pill switch-outline-success-alt noclick">
                <input type="checkbox" class="switch-input" [attr.checked]="user.isActive ? 'checked' : null">
                <span class="switch-slider" data-checked="&#x2713;" data-unchecked="&#x2715;"></span>
              </label>
            </td>
            <td>
              <button type="button" [disabled]="isMyUser(user)" class="btn btn-danger btn-sm" popover="Delete User"
                triggers="mouseenter:mouseleave" (click)="deleteUser(user)"><i class="cil-trash"></i></button>
              <button type="button" class="btn btn-primary btn-sm" popover="Update User"
                triggers="mouseenter:mouseleave" (click)="updateUser(user)"><i class="cil-pencil"></i></button>
            </td>
          </tr>
        </ng-template>
        <ng-template #loading>
          <tr>
            <td colspan="100%" class="table-no-row">No row data</td>
          </tr>
        </ng-template>

      </tbody>
    </table> -->

    </div>

    <ngx-loading [show]="_isRunning" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>

</div>